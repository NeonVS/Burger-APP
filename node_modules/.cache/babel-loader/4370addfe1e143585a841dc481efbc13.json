{"ast":null,"code":"import _objectSpread from\"D:\\\\Web Development Projects\\\\burger_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:\\\\Web Development Projects\\\\burger_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Web Development Projects\\\\burger_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"D:\\\\Web Development Projects\\\\burger_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"D:\\\\Web Development Projects\\\\burger_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Aux from'../../hoc/Auxillary/Auxillary';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import axios from'../../../src/axios-order';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';import{connect}from'react-redux';//import * as actionTypes from '../../store/actions/actionsTypes';\nimport*as burgerBuilderActions from'../../store/actions/index';var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);var _super=_createSuper(BurgerBuilder);function BurgerBuilder(){var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={purchasing:false,loading:false,error:false};_this.purchaseHandler=function(){if(_this.props.isAuthenticated){_this.setState({purchasing:true});}else{_this.props.onSetAuthRedirectPath('/checkout');_this.props.history.push('/auth');}};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){//alert('You continue!');\n// this.setState({loading:true});\n// const order ={\n//     ingredients:this.state.ingredients,\n//     price:this.state.totalPrice,\n//     customer:{\n//         name:'Vishu Saxena',\n//         address:{\n//             street:'Street -1 New Bay',\n//             zipcode:'564646',\n//             country:'INDIA'\n//         },\n//     email:'vishu@gmail.com',\n//     deliveryMethod:'fastest'\n//     }\n// }\n// axios.post('/orders.json',order)\n// .then(response=>{\n//     console.log(response);\n//     this.setState({loading:false,purchasing:false});\n// })\n// .catch(err=>{\n//     this.setState({loading:false,purchasing:false});\n//     console.log(err);\n// });  \n// const queryParams =[];\n// for(let i in this.state.ingredients){\n//     queryParams.push(encodeURIComponent(i)+'='+encodeURIComponent(this.state.ingredients[i]));\n// }\n// queryParams.push('price='+this.props.price);\n// const queryString = queryParams.join('&');\n// this.props.history.push({\n//     pathname:'/checkout',\n//     search:'?'+queryString\n// });\n_this.props.onInitPurchase();_this.props.history.push('/checkout');};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onInitIngredients();}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);return sum>0;}// addIngredientHandler = (type)=>{\n//     const oldCount = this.state.ingredients[type];\n//     const updatedCount = oldCount + 1;\n//     const updatedIngredients = {\n//         ...this.state.ingredients\n//     };\n//     updatedIngredients[type] = updatedCount;\n//     const priceAddition = INGREDIENT_PRICES[type];\n//     const oldPrice = this.state.totalPrice;\n//     const newPrice = oldPrice+priceAddition;\n//     this.setState({totalPrice:newPrice,ingredients:updatedIngredients});\n//     this.updatePurchaseState(updatedIngredients);\n// }\n// removeIngredientHandler = (type)=>{\n//     const oldCount = this.state.ingredients[type];\n//     if(oldCount <= 0){\n//         return;\n//     }\n//     const updatedCount = oldCount - 1;\n//     const updatedIngredients = {\n//         ...this.state.ingredients\n//     };\n//     updatedIngredients[type] = updatedCount;\n//     const priceDeduction = INGREDIENT_PRICES[type];\n//     const oldPrice = this.state.totalPrice;\n//     const newPrice = oldPrice-priceDeduction;\n//     this.setState({totalPrice:newPrice,ingredients:updatedIngredients});\n//     this.updatePurchaseState(updatedIngredients);\n// }\n},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ings);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var Ordersummary=null;var burger=this.props.error?/*#__PURE__*/React.createElement(\"p\",null,\"Ingredients can't be loaded!\"):/*#__PURE__*/React.createElement(Spinner,null);if(this.props.ings){burger=/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Burger,{ingredients:this.props.ings}),/*#__PURE__*/React.createElement(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,purchaseable:this.updatePurchaseState(this.props.ings),ordered:this.purchaseHandler,isAuth:this.props.isAuthenticated,price:this.props.price}));Ordersummary=/*#__PURE__*/React.createElement(OrderSummary,{ingredients:this.props.ings,price:this.props.price,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}return/*#__PURE__*/React.createElement(Aux,null,/*#__PURE__*/React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},Ordersummary),burger);}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ings:state.burgerBuilder.ingredients,price:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuthenticated:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(burgerBuilderActions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(burgerBuilderActions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(){return dispatch(burgerBuilderActions.initIngredients());},onInitPurchase:function onInitPurchase(){return dispatch(burgerBuilderActions.purchaseInit());},onSetAuthRedirectPath:function onSetAuthRedirectPath(path){return dispatch(burgerBuilderActions.setAuthRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["D:/Web Development Projects/burger_app/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","connect","burgerBuilderActions","BurgerBuilder","state","purchasing","loading","error","purchaseHandler","props","isAuthenticated","setState","onSetAuthRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","onInitIngredients","ingredients","sum","Object","keys","map","igKey","reduce","el","disabledInfo","ings","key","Ordersummary","burger","onIngredientAdded","onIngredientRemoved","updatePurchaseState","price","mapStateToProps","burgerBuilder","totalPrice","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","purchaseInit","path","setAuthRedirectPath"],"mappings":"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","sourcesContent":["import React,{ Component } from \"react\";\r\nimport Aux from '../../hoc/Auxillary/Auxillary';\r\nimport Burger from '../../components/Burger/Burger';\r\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary';\r\nimport axios from '../../../src/axios-order';\r\nimport Spinner from '../../components/UI/Spinner/Spinner'; \r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport {connect} from 'react-redux';\r\n//import * as actionTypes from '../../store/actions/actionsTypes';\r\nimport * as burgerBuilderActions from '../../store/actions/index';\r\n\r\nclass BurgerBuilder extends Component{\r\n    state={\r\n        purchasing:false,\r\n        loading:false,\r\n        error:false\r\n    };\r\n    componentDidMount(){\r\n        this.props.onInitIngredients();\r\n    }\r\n\r\n    updatePurchaseState(ingredients){\r\n        const sum =Object.keys(ingredients)\r\n        .map(igKey =>{\r\n            return ingredients[igKey];\r\n        }).reduce((sum,el)=>{\r\n            return sum+el;\r\n        },0);\r\n        return sum>0;\r\n    }\r\n\r\n    // addIngredientHandler = (type)=>{\r\n    //     const oldCount = this.state.ingredients[type];\r\n    //     const updatedCount = oldCount + 1;\r\n    //     const updatedIngredients = {\r\n    //         ...this.state.ingredients\r\n    //     };\r\n    //     updatedIngredients[type] = updatedCount;\r\n    //     const priceAddition = INGREDIENT_PRICES[type];\r\n    //     const oldPrice = this.state.totalPrice;\r\n    //     const newPrice = oldPrice+priceAddition;\r\n    //     this.setState({totalPrice:newPrice,ingredients:updatedIngredients});\r\n    //     this.updatePurchaseState(updatedIngredients);\r\n    // }\r\n\r\n    // removeIngredientHandler = (type)=>{\r\n    //     const oldCount = this.state.ingredients[type];\r\n    //     if(oldCount <= 0){\r\n    //         return;\r\n    //     }\r\n    //     const updatedCount = oldCount - 1;\r\n    //     const updatedIngredients = {\r\n    //         ...this.state.ingredients\r\n    //     };\r\n    //     updatedIngredients[type] = updatedCount;\r\n    //     const priceDeduction = INGREDIENT_PRICES[type];\r\n    //     const oldPrice = this.state.totalPrice;\r\n    //     const newPrice = oldPrice-priceDeduction;\r\n    //     this.setState({totalPrice:newPrice,ingredients:updatedIngredients});\r\n    //     this.updatePurchaseState(updatedIngredients);\r\n    // }\r\n    purchaseHandler=()=>{\r\n        if(this.props.isAuthenticated){\r\n            this.setState({purchasing:true});\r\n        }else{\r\n            this.props.onSetAuthRedirectPath('/checkout');\r\n            this.props.history.push('/auth');\r\n        }\r\n    }\r\n    purchaseCancelHandler=()=>{\r\n        this.setState({purchasing:false});\r\n    }\r\n    purchaseContinueHandler = () =>{\r\n        //alert('You continue!');\r\n        // this.setState({loading:true});\r\n        // const order ={\r\n        //     ingredients:this.state.ingredients,\r\n        //     price:this.state.totalPrice,\r\n        //     customer:{\r\n        //         name:'Vishu Saxena',\r\n        //         address:{\r\n        //             street:'Street -1 New Bay',\r\n        //             zipcode:'564646',\r\n        //             country:'INDIA'\r\n        //         },\r\n        //     email:'vishu@gmail.com',\r\n        //     deliveryMethod:'fastest'\r\n        //     }\r\n        // }\r\n        // axios.post('/orders.json',order)\r\n        // .then(response=>{\r\n        //     console.log(response);\r\n        //     this.setState({loading:false,purchasing:false});\r\n        // })\r\n        // .catch(err=>{\r\n        //     this.setState({loading:false,purchasing:false});\r\n        //     console.log(err);\r\n        // });  \r\n        // const queryParams =[];\r\n        // for(let i in this.state.ingredients){\r\n        //     queryParams.push(encodeURIComponent(i)+'='+encodeURIComponent(this.state.ingredients[i]));\r\n        // }\r\n        // queryParams.push('price='+this.props.price);\r\n        // const queryString = queryParams.join('&');\r\n        // this.props.history.push({\r\n        //     pathname:'/checkout',\r\n        //     search:'?'+queryString\r\n        // });\r\n        this.props.onInitPurchase();\r\n        this.props.history.push('/checkout');\r\n    }\r\n    render(){\r\n        const disabledInfo = {\r\n            ...this.props.ings\r\n        };\r\n        for(let key in disabledInfo){\r\n            disabledInfo[key] = disabledInfo[key] <=0;\r\n        }\r\n        let Ordersummary = null;\r\n        let burger =this.props.error?<p>Ingredients can't be loaded!</p>:<Spinner />;\r\n        if(this.props.ings){\r\n            burger =(<Aux>\r\n                <Burger ingredients={this.props.ings}/>\r\n                <BuildControls \r\n                ingredientAdded={this.props.onIngredientAdded}\r\n                ingredientRemoved={this.props.onIngredientRemoved}\r\n                disabled={disabledInfo}\r\n                purchaseable={this.updatePurchaseState(this.props.ings)}\r\n                ordered={this.purchaseHandler}\r\n                isAuth={this.props.isAuthenticated}\r\n                price={this.props.price}/>\r\n            </Aux>\r\n            );\r\n            Ordersummary = (<OrderSummary ingredients={this.props.ings} price={this.props.price} purchaseCancelled={this.purchaseCancelHandler}purchaseContinued={this.purchaseContinueHandler}/>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Aux>\r\n                <Modal \r\n                show={this.state.purchasing}\r\n                modalClosed={this.purchaseCancelHandler}>\r\n                    {Ordersummary}\r\n                </Modal>\r\n                {burger}    \r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n    return {\r\n        ings:state.burgerBuilder.ingredients,\r\n        price:state.burgerBuilder.totalPrice, \r\n        error:state.burgerBuilder.error,\r\n        isAuthenticated:state.auth.token !== null,\r\n        \r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch =>{\r\n    return {\r\n        onIngredientAdded:(ingName) =>dispatch(burgerBuilderActions.addIngredient(ingName)),\r\n        onIngredientRemoved:(ingName) =>dispatch(burgerBuilderActions.removeIngredient(ingName)),\r\n        onInitIngredients:() =>dispatch(burgerBuilderActions.initIngredients()),\r\n        onInitPurchase:()=>dispatch(burgerBuilderActions.purchaseInit()),\r\n        onSetAuthRedirectPath:(path)=>dispatch(burgerBuilderActions.setAuthRedirectPath(path))\r\n    }\r\n}\r\n\r\n\r\nexport  default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));"]},"metadata":{},"sourceType":"module"}